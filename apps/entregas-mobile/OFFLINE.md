# Sistema Offline - App de Entregas

## ğŸ“± Como Funciona

O app de entregas agora funciona **completamente offline**, igual ao WhatsApp! VocÃª pode:

- âœ… **PrÃ©-carregar dados** quando estiver online
- âœ… **Trabalhar offline** sem perder funcionalidades
- âœ… **Registrar entregas** mesmo sem internet
- âœ… **Sincronizar automaticamente** quando voltar online

## ğŸ”„ Funcionamento AutomÃ¡tico

### Quando Online:
1. **Download automÃ¡tico**: Dados sÃ£o baixados e salvos localmente
2. **Cache inteligente**: Rotas, escolas e itens ficam disponÃ­veis offline
3. **SincronizaÃ§Ã£o**: OperaÃ§Ãµes pendentes sÃ£o enviadas automaticamente

### Quando Offline:
1. **Dados locais**: Usa informaÃ§Ãµes salvas no cache
2. **Fila de operaÃ§Ãµes**: Entregas ficam na fila para sincronizar
3. **Indicadores visuais**: Mostra status offline e operaÃ§Ãµes pendentes

### Quando Volta Online:
1. **SincronizaÃ§Ã£o automÃ¡tica**: Envia todas as operaÃ§Ãµes pendentes
2. **AtualizaÃ§Ã£o de dados**: Baixa informaÃ§Ãµes mais recentes
3. **NotificaÃ§Ãµes**: Confirma que tudo foi sincronizado

## ğŸ¯ Funcionalidades Offline

### âœ… O que funciona offline:
- Visualizar rotas e escolas
- Ver detalhes dos itens para entrega
- Confirmar entregas (fica na fila)
- Cancelar entregas (fica na fila)
- Tirar fotos de comprovante
- Navegar entre telas

### âŒ O que precisa de internet:
- Login inicial
- Primeira sincronizaÃ§Ã£o de dados
- EstatÃ­sticas em tempo real
- Upload de fotos para servidor

## ğŸ“Š Gerenciamento do Cache

### Tela de ConfiguraÃ§Ãµes Offline:
- **Status da conexÃ£o**: Online/Offline/Sincronizando
- **InformaÃ§Ãµes do cache**: Tamanho e Ãºltima sincronizaÃ§Ã£o
- **OperaÃ§Ãµes pendentes**: Quantas entregas aguardam sincronizaÃ§Ã£o
- **AÃ§Ãµes manuais**: Sincronizar agora, limpar cache

### Acesso:
`Perfil â†’ ConfiguraÃ§Ãµes Offline`

## ğŸ”§ Indicadores Visuais

### Status de Conectividade:
- ğŸŸ¢ **Online**: Conectado e sincronizado
- ğŸŸ¡ **Sincronizando**: Enviando operaÃ§Ãµes pendentes
- ğŸ”´ **Offline**: Sem conexÃ£o, usando cache local

### Na Tela de Detalhes da Escola:
- ğŸ“¶ **Modo Offline**: Indica que estÃ¡ trabalhando offline
- ğŸ”„ **X operaÃ§Ãµes pendentes**: Mostra quantas entregas aguardam sincronizaÃ§Ã£o

## ğŸ’¾ Armazenamento Local

### O que Ã© salvo:
- **Rotas**: Lista completa de rotas de entrega
- **Escolas**: InformaÃ§Ãµes de todas as escolas por rota
- **Itens**: Produtos para entrega de cada escola
- **OperaÃ§Ãµes**: Fila de entregas confirmadas/canceladas offline
- **Fotos**: Comprovantes salvos localmente

### Limpeza automÃ¡tica:
- Cache Ã© atualizado automaticamente quando online
- OperaÃ§Ãµes sÃ£o removidas apÃ³s sincronizaÃ§Ã£o bem-sucedida
- Dados antigos sÃ£o substituÃ­dos por versÃµes mais recentes

## ğŸš€ Fluxo de Trabalho Recomendado

### 1. PreparaÃ§Ã£o (Online):
```
1. Abrir o app conectado Ã  internet
2. Ir em "Perfil â†’ ConfiguraÃ§Ãµes Offline"
3. Clicar em "PrÃ©-carregar Dados para Offline"
4. Aguardar o download completo (todas as rotas, escolas e itens)
5. Verificar se os dados estÃ£o salvos no cache
```

### 2. Trabalho de Campo (Pode ser Offline):
```
1. Ir para as escolas fazer entregas
2. Confirmar entregas normalmente (mesmo sem internet)
3. Observar indicadores de "operaÃ§Ãµes pendentes"
```

### 3. SincronizaÃ§Ã£o (Online):
```
1. Conectar Ã  internet
2. App sincroniza automaticamente
3. Verificar se todas as operaÃ§Ãµes foram enviadas
```

## âš ï¸ Importante

### Primeira Vez:
- **Sempre conecte Ã  internet primeiro** para baixar os dados iniciais
- Navegue pelas rotas/escolas para garantir que tudo seja baixado

### Bateria e Armazenamento:
- O app salva dados localmente (usa espaÃ§o do celular)
- Fotos ficam salvas atÃ© serem enviadas
- Cache pode ser limpo nas configuraÃ§Ãµes se necessÃ¡rio

### SincronizaÃ§Ã£o:
- **AutomÃ¡tica**: Acontece quando volta online
- **Manual**: Pode forÃ§ar nas "ConfiguraÃ§Ãµes Offline"
- **Tentativas**: Sistema tenta 3 vezes antes de desistir

## ğŸ” SoluÃ§Ã£o de Problemas

### "Dados nÃ£o disponÃ­veis offline":
- Conecte Ã  internet e navegue pelas telas para baixar dados
- VÃ¡ em "ConfiguraÃ§Ãµes Offline" â†’ "Sincronizar Todos os Dados"

### OperaÃ§Ãµes nÃ£o sincronizando:
- Verifique a conexÃ£o com internet
- VÃ¡ em "ConfiguraÃ§Ãµes Offline" â†’ "Enviar OperaÃ§Ãµes Pendentes"
- Se persistir, entre em contato com suporte

### Cache muito grande:
- VÃ¡ em "ConfiguraÃ§Ãµes Offline" â†’ "Limpar Cache"
- **AtenÃ§Ã£o**: PrecisarÃ¡ estar online para usar o app novamente

## ğŸ“ Suporte

Em caso de problemas com o sistema offline:
1. Verifique as "ConfiguraÃ§Ãµes Offline"
2. Tente sincronizar manualmente
3. Se necessÃ¡rio, limpe o cache e sincronize novamente
4. Entre em contato com a equipe de TI

---

**ğŸ’¡ Dica**: O sistema foi projetado para funcionar como o WhatsApp - vocÃª pode usar normalmente e ele cuida da sincronizaÃ§Ã£o automaticamente!